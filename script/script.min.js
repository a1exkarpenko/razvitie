function callInit(){const e=document.querySelectorAll("[data-call]"),t=document.querySelector("[data-call-header]"),n=document.querySelector("section.indi"),l=document.querySelector("body"),c=document.querySelector(".popup"),o=document.querySelector(".popup__close"),u=()=>{c.classList.remove("popup-hidden"),l.classList.add("body-lock")};e.forEach((e=>{e.addEventListener("click",u)})),o.addEventListener("click",(()=>{c.classList.add("popup-hidden"),l.classList.remove("body-lock")})),t.addEventListener("click",(()=>{if(window.innerWidth<=1180)return u();n.scrollIntoView({behavior:"smooth"})}))}function dropListInit(){document.querySelectorAll(".objects__item").forEach((e=>{e.children[0].addEventListener("click",(()=>{const t=e.children[1],n=t.scrollHeight;t.classList.toggle("objects-open"),t.style.maxHeight=t.classList.contains("objects-open")?7*t.children.length+n+"px":null,e.children[0].classList.toggle("objects-open")}))}));document.querySelectorAll(".faq__button").forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.classList.toggle("faq-open");const t=e.parentNode.children[1];t.style.maxHeight=e.parentNode.classList.contains("faq-open")?t.scrollHeight+"px":null}))}))}function formInit(){const e=document.querySelectorAll(".indi-next"),t=document.querySelectorAll(".indi-back"),n=document.querySelector(".indi__form-list"),l=document.querySelector(".indi__right").clientWidth,c=document.querySelectorAll("[data-step]");let o=1;const u=()=>{c.forEach((e=>{parseInt(e.getAttribute("data-step"))===o?e.classList.add("current-step"):e.classList.remove("current-step")})),n.style.left=-(o-1)*l+"px"};e.forEach((e=>{e.addEventListener("click",(()=>{o++,u()}))})),t.forEach((e=>{e.addEventListener("click",(()=>{o--,u()}))}));const s=document.querySelector(".indi-submit"),r=document.querySelector(".indi__right"),a=document.querySelector('[name="months"]'),i=document.querySelector('[name="sum"]'),d=document.querySelector("#form-phone"),m=document.querySelector('[name="place"]'),S=document.querySelector('[name="name"]'),h=document.querySelector('[name="type"]'),p=document.querySelector('[name="object"]'),v=(e,t)=>!!e.value||(o=t,u(),e.style.borderColor="#474747",e.focus(),setTimeout((()=>{e.style.borderColor="#b68300"}),5e3),n.style.left=-(t-1)*l+"px",!1),y=()=>!!(v(i,1)&&v(a,1)&&v(h,1)&&v(p,2)&&v(m,2)&&v(S,3)&&v(d,3));s.addEventListener("click",(()=>{if(!y())return!1})),r.addEventListener("keydown",(e=>{if(13==e.keyCode&&(e.preventDefault(),!y()))return!1}))}function rangeSlidersInit(){const e=document.querySelectorAll("[data-range-block]"),t=document.querySelectorAll("[data-tab-content]"),n=document.querySelector("#payment-schedule"),l=document.querySelector("body"),c=document.querySelector(".schedule"),o=document.querySelector(".schedule__exit"),u=document.querySelector(".schedule__list"),s=document.querySelector(".schedule__footer"),r=document.querySelector("#current-sum-value"),a=document.querySelector("#calc-sum"),i=document.querySelector("#calc-sum-line"),d=document.querySelector("#current-sum-value-monthly"),m=document.querySelector("#calc-sum-monthly"),S=document.querySelector("#calc-sum-line-monthly"),h=document.querySelector("#calc-month"),p=document.querySelector("#calc-month-line"),v=document.querySelector("#current-month-value"),y=document.querySelector("#result-sum"),L=document.querySelector("#calc-every-month");let q="credit";const f=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],g={dates:[],summs:[],mainSumms:[],percentSumms:[],finalSum:0,mainFinalSum:0,percentFianlSum:0};t.forEach((n=>{n.addEventListener("click",(()=>{q=n.getAttribute("data-tab-content"),t.forEach((e=>{e.getAttribute("data-tab-content")===q?e.classList.add("calc-current"):e.classList.remove("calc-current")})),e.forEach((e=>{e.getAttribute("data-range-block")===q?e.classList.remove("calc-d-none"):e.classList.add("calc-d-none")})),x()}))}));const E=(e,t,n)=>{const l=Math.round(e.value/n*100);t.style.width=l+"%"},_=(e,t)=>{e.textContent=(t/1).toLocaleString("ru-RU")},b=e=>+e.toFixed(),x=()=>{if("credit"===q){y.textContent=k(a.value);const e=.18*a.value,t=b(e/h.value);L.textContent=k(t)}else{L.textContent=m.value;const e=b(m.value*h.value/.18);y.textContent=k(e)}},k=e=>(e/1).toLocaleString("ru-RU"),w=()=>{E(a,i,1e8),_(r,a.value),_(y,a.value),x()},C=()=>{E(m,S,1e6),_(d,m.value),_(L,m.value),x()},F=()=>{E(h,p,120),_(v,h.value),x()};a.addEventListener("input",w),a.addEventListener("change",w),m.addEventListener("input",C),m.addEventListener("change",C),h.addEventListener("input",F),h.addEventListener("change",F),n.addEventListener("click",(()=>{(()=>{if(g.dates=[],g.summs=[],g.mainSumms=[],g.percentSumms=[],g.finalSum=0,g.mainFinalSum=0,g.percentFianlSum=0,"credit"===q){y.textContent=k(a.value);const e=.18*a.value,t=b(e/h.value);L.textContent=k(t);const n=new Date;let l=n.getMonth(),c=n.getFullYear();for(let e=0;e<h.value;e++)g.summs.push(t),g.mainSumms.push(0),g.percentSumms.push(t),g.dates.push(`${f[l]} ${c}`),l++,12===l&&(l=0,c++);g.summs[g.summs.length-1]+=+a.value,g.mainSumms[g.mainSumms.length-1]=+a.value,g.finalSum=+a.value+e,g.mainFinalSum=+a.value,g.percentFianlSum=e}else{L.textContent=m.value;const e=b(m.value*h.value/.18);y.textContent=k(e);const t=new Date;let n=t.getMonth(),l=t.getFullYear();for(let e=0;e<h.value;e++)g.summs.push(+m.value),g.mainSumms.push(0),g.percentSumms.push(+m.value),g.dates.push(`${f[n]} ${l}`),n++,12===n&&(n=0,l++);g.summs[g.summs.length-1]+=e,g.mainSumms[g.mainSumms.length-1]=e,g.finalSum=e+h.value*m.value,g.mainFinalSum=e,g.percentFianlSum=h.value*m.value}})(),(()=>{u.innerHTML="";for(let e=0;e<g.dates.length;e++)u.innerHTML+=`\n            <ul class="schedule__row">\n                <li class="schedule__item">${e+1}</li>\n                <li class="schedule__item">${g.dates[e]}</li>\n                <li class="schedule__item">${k(b(g.summs[e]))}</li>\n                <li class="schedule__item">${k(b(g.mainSumms[e]))}</li>\n                <li class="schedule__item">${k(b(g.percentSumms[e]))}</li>\n            </ul>\n            `;s.children[1].textContent=k(b(g.finalSum)),s.children[2].textContent=k(b(g.mainFinalSum)),s.children[3].textContent=k(b(g.percentFianlSum))})(),l.classList.add("body-lock"),c.classList.remove("schedule-closed")})),o.addEventListener("click",(()=>{l.classList.remove("body-lock"),c.classList.add("schedule-closed")})),x(),E(m,S,1e6),E(h,p,120),E(a,i,1e8)}function swiperInit(){new Swiper(".swiper",{navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},autoHeight:!0,loop:!0,breakpoints:{0:{slidesPerView:1,spaceBetween:48},1180:{slidesPerView:3,spaceBetween:48},1480:{slidesPerView:3,spaceBetween:64}}})}document.addEventListener("DOMContentLoaded",(()=>{dropListInit(),formInit(),rangeSlidersInit(),swiperInit(),callInit()}));