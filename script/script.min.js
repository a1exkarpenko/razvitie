function callInit(){const e=document.querySelectorAll("[data-call]"),t=document.querySelector("section.indi"),n=document.querySelector("body"),c=document.querySelector(".popup"),o=document.querySelector(".popup__close"),r=()=>{c.classList.remove("popup-hidden"),n.classList.add("body-lock")};e.forEach((e=>{e.addEventListener("click",(()=>{if(window.innerWidth<=1180)return r();t.scrollIntoView({behavior:"smooth"})}))})),o.addEventListener("click",(()=>{c.classList.add("popup-hidden"),n.classList.remove("body-lock")})),setTimeout((()=>{r(),setTimeout(r,12e4)}),15e3)}function dropListInit(){document.querySelectorAll(".objects__item").forEach((e=>{e.children[0].addEventListener("click",(()=>{const t=e.children[1],n=t.scrollHeight;t.classList.toggle("objects-open"),t.style.maxHeight=t.classList.contains("objects-open")?7*t.children.length+n+"px":null,e.children[0].classList.toggle("objects-open")}))}));document.querySelectorAll(".faq__button").forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.classList.toggle("faq-open");const t=e.parentNode.children[1];t.style.maxHeight=e.parentNode.classList.contains("faq-open")?t.scrollHeight+"px":null}))}))}function formInit(){const e=document.querySelectorAll(".indi-next"),t=document.querySelectorAll(".indi-back"),n=document.querySelector(".indi__form-list"),c=document.querySelector(".indi__right").clientWidth,o=document.querySelectorAll("[data-step]");let r=1;const l=()=>{o.forEach((e=>{parseInt(e.getAttribute("data-step"))===r?e.classList.add("current-step"):e.classList.remove("current-step")})),n.style.left=-(r-1)*c+"px"};e.forEach((e=>{e.addEventListener("click",(()=>{r++,l()}))})),t.forEach((e=>{e.addEventListener("click",(()=>{r--,l()}))}));const a=document.querySelector(".indi-submit"),u=document.querySelector(".indi__right"),i=document.querySelector('[name="months"]'),d=document.querySelector('[name="sum"]'),s=document.querySelector("#form-phone"),m=document.querySelector('[name="place"]'),y=document.querySelector('[name="name"]'),p=document.querySelector('[name="type"]'),v=document.querySelector('[name="object"]'),h=(e,t)=>!!e.value||(r=t,l(),e.style.borderColor="#474747",e.focus(),setTimeout((()=>{e.style.borderColor="#b68300"}),5e3),n.style.left=-(t-1)*c+"px",!1),S=()=>!!(h(d,1)&&h(i,1)&&h(p,1)&&h(v,2)&&h(m,2)&&h(y,3)&&h(s,3));a.addEventListener("click",(()=>{if(!S())return!1})),u.addEventListener("keydown",(e=>{if(13==e.keyCode&&(e.preventDefault(),!S()))return!1}))}function rangeSlidersInit(){const e=document.querySelectorAll("[data-range-block]"),t=document.querySelectorAll("[data-tab-content]"),n=document.querySelector("#current-sum-value"),c=document.querySelector("#calc-sum"),o=document.querySelector("#calc-sum-line"),r=document.querySelector("#current-sum-value-monthly"),l=document.querySelector("#calc-sum-monthly"),a=document.querySelector("#calc-sum-line-monthly"),u=document.querySelector("#calc-month"),i=document.querySelector("#calc-month-line"),d=document.querySelector("#current-month-value"),s=document.querySelector("#result-sum"),m=document.querySelector("#calc-every-month"),y=document.querySelector(".calc__button[data-call]"),p=document.querySelector('[name="sum"]'),v=document.querySelector('[name="months"]');y.addEventListener("click",(()=>{v.value=u.value,p.value=s.textContent}));let h="credit";t.forEach((n=>{n.addEventListener("click",(()=>{h=n.getAttribute("data-tab-content"),t.forEach((e=>{e.getAttribute("data-tab-content")===h?e.classList.add("calc-current"):e.classList.remove("calc-current")})),e.forEach((e=>{e.getAttribute("data-range-block")===h?e.classList.remove("calc-d-none"):e.classList.add("calc-d-none")})),f()}))}));const S=(e,t,n)=>{const c=Math.round(e.value/n*100);t.style.width=c+"%"},q=(e,t)=>{e.textContent=(t/1).toLocaleString("ru-RU")},L=e=>+e.toFixed(),f=()=>{if("credit"===h){s.textContent=g(c.value);const e=.18*c.value,t=L(e/u.value);m.textContent=g(t)}else{m.textContent=g(l.value);const e=L(l.value*u.value/.18);s.textContent=g(e)}},g=e=>(e/1).toLocaleString("ru-RU"),E=()=>{S(c,o,4e7),q(n,c.value),q(s,c.value),f()},b=()=>{S(l,a,1e6),q(r,l.value),q(m,l.value),f()},w=()=>{S(u,i,120),q(d,u.value),f()};c.addEventListener("input",E),c.addEventListener("change",E),l.addEventListener("input",b),l.addEventListener("change",b),u.addEventListener("input",w),u.addEventListener("change",w),f(),S(l,a,1e6),S(u,i,120),S(c,o,4e7)}function swiperInit(){new Swiper(".swiper",{navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},autoHeight:!0,loop:!0,breakpoints:{0:{slidesPerView:1,spaceBetween:48},1180:{slidesPerView:3,spaceBetween:48},1480:{slidesPerView:3,spaceBetween:64}}})}document.addEventListener("DOMContentLoaded",(()=>{dropListInit(),formInit(),rangeSlidersInit(),swiperInit(),callInit()}));