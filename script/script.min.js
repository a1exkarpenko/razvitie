function callInit(){const e=document.querySelectorAll("[data-call]"),t=document.querySelector("section.indi"),n=document.querySelector("body"),l=document.querySelector(".popup"),c=document.querySelector(".popup__close");e.forEach((e=>{e.addEventListener("click",(()=>{if(window.innerWidth<=1180)return l.classList.remove("popup-hidden"),void n.classList.add("body-lock");t.scrollIntoView({behavior:"smooth"})}))})),c.addEventListener("click",(()=>{l.classList.add("popup-hidden"),n.classList.remove("body-lock")}))}function dropListInit(){document.querySelectorAll(".objects__item").forEach((e=>{e.children[0].addEventListener("click",(()=>{const t=e.children[1],n=t.scrollHeight;t.classList.toggle("objects-open"),t.style.maxHeight=t.classList.contains("objects-open")?7*t.children.length+n+"px":null,e.children[0].classList.toggle("objects-open")}))}));document.querySelectorAll(".faq__button").forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.classList.toggle("faq-open");const t=e.parentNode.children[1];t.style.maxHeight=e.parentNode.classList.contains("faq-open")?t.scrollHeight+"px":null}))}))}function formInit(){const e=document.querySelectorAll(".indi-next"),t=document.querySelectorAll(".indi-back"),n=document.querySelector(".indi__form-list"),l=document.querySelector(".indi__right").clientWidth,c=document.querySelectorAll("[data-step]");let o=1;const u=()=>{c.forEach((e=>{parseInt(e.getAttribute("data-step"))===o?e.classList.add("current-step"):e.classList.remove("current-step")})),n.style.left=-(o-1)*l+"px"};e.forEach((e=>{e.addEventListener("click",(()=>{o++,u()}))})),t.forEach((e=>{e.addEventListener("click",(()=>{o--,u()}))}));const s=document.querySelector(".indi-submit"),r=document.querySelector(".indi__right"),a=document.querySelector('[name="months"]'),i=document.querySelector('[name="sum"]'),d=document.querySelector("#form-phone"),m=document.querySelector('[name="place"]'),S=document.querySelector('[name="name"]'),h=document.querySelector('[name="type"]'),p=document.querySelector('[name="object"]'),v=(e,t)=>!!e.value||(o=t,u(),e.style.borderColor="#474747",e.focus(),setTimeout((()=>{e.style.borderColor="#b68300"}),5e3),n.style.left=-(t-1)*l+"px",!1),y=()=>!!(v(i,1)&&v(a,1)&&v(h,1)&&v(p,2)&&v(m,2)&&v(S,3)&&v(d,3));s.addEventListener("click",(()=>{if(!y())return!1})),r.addEventListener("keydown",(e=>{if(13==e.keyCode&&(e.preventDefault(),!y()))return!1}))}function rangeSlidersInit(){const e=document.querySelectorAll("[data-range-block]"),t=document.querySelectorAll("[data-tab-content]"),n=document.querySelector("#payment-schedule"),l=document.querySelector("body"),c=document.querySelector(".schedule"),o=document.querySelector(".schedule__exit"),u=document.querySelector(".schedule__list"),s=document.querySelector(".schedule__footer"),r=document.querySelector("#current-sum-value"),a=document.querySelector("#calc-sum"),i=document.querySelector("#calc-sum-line"),d=document.querySelector("#current-sum-value-monthly"),m=document.querySelector("#calc-sum-monthly"),S=document.querySelector("#calc-sum-line-monthly"),h=document.querySelector("#calc-month"),p=document.querySelector("#calc-month-line"),v=document.querySelector("#current-month-value"),y=document.querySelector("#result-sum"),q=document.querySelector("#calc-every-month"),L=document.querySelector(".calc__button[data-call]"),f=document.querySelector('[name="sum"]'),g=document.querySelector('[name="months"]');L.addEventListener("click",(()=>{g.value=h.value,f.value=y.textContent}));let _="credit";const E=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],b={dates:[],summs:[],mainSumms:[],percentSumms:[],finalSum:0,mainFinalSum:0,percentFianlSum:0};t.forEach((n=>{n.addEventListener("click",(()=>{_=n.getAttribute("data-tab-content"),t.forEach((e=>{e.getAttribute("data-tab-content")===_?e.classList.add("calc-current"):e.classList.remove("calc-current")})),e.forEach((e=>{e.getAttribute("data-range-block")===_?e.classList.remove("calc-d-none"):e.classList.add("calc-d-none")})),C()}))}));const x=(e,t,n)=>{const l=Math.round(e.value/n*100);t.style.width=l+"%"},k=(e,t)=>{e.textContent=(t/1).toLocaleString("ru-RU")},w=e=>+e.toFixed(),C=()=>{if("credit"===_){y.textContent=F(a.value);const e=.18*a.value,t=w(e/h.value);q.textContent=F(t)}else{q.textContent=F(m.value);const e=w(m.value*h.value/.18);y.textContent=F(e)}},F=e=>(e/1).toLocaleString("ru-RU"),A=()=>{x(a,i,8e7),k(r,a.value),k(y,a.value),C()},I=()=>{x(m,S,1e6),k(d,m.value),k(q,m.value),C()},$=()=>{x(h,p,120),k(v,h.value),C()};a.addEventListener("input",A),a.addEventListener("change",A),m.addEventListener("input",I),m.addEventListener("change",I),h.addEventListener("input",$),h.addEventListener("change",$),n.addEventListener("click",(()=>{(()=>{if(b.dates=[],b.summs=[],b.mainSumms=[],b.percentSumms=[],b.finalSum=0,b.mainFinalSum=0,b.percentFianlSum=0,"credit"===_){y.textContent=F(a.value);const e=.18*a.value,t=w(e/h.value);q.textContent=F(t);const n=new Date;let l=n.getMonth(),c=n.getFullYear();for(let e=0;e<h.value;e++)b.summs.push(t),b.mainSumms.push(0),b.percentSumms.push(t),b.dates.push(`${E[l]} ${c}`),l++,12===l&&(l=0,c++);b.summs[b.summs.length-1]+=+a.value,b.mainSumms[b.mainSumms.length-1]=+a.value,b.finalSum=+a.value+e,b.mainFinalSum=+a.value,b.percentFianlSum=e}else{q.textContent=m.value;const e=w(m.value*h.value/.18);y.textContent=F(e);const t=new Date;let n=t.getMonth(),l=t.getFullYear();for(let e=0;e<h.value;e++)b.summs.push(+m.value),b.mainSumms.push(0),b.percentSumms.push(+m.value),b.dates.push(`${E[n]} ${l}`),n++,12===n&&(n=0,l++);b.summs[b.summs.length-1]+=e,b.mainSumms[b.mainSumms.length-1]=e,b.finalSum=e+h.value*m.value,b.mainFinalSum=e,b.percentFianlSum=h.value*m.value}})(),(()=>{u.innerHTML="";for(let e=0;e<b.dates.length;e++)u.innerHTML+=`\n            <ul class="schedule__row">\n                <li class="schedule__item">${e+1}</li>\n                <li class="schedule__item">${b.dates[e]}</li>\n                <li class="schedule__item">${F(w(b.summs[e]))}</li>\n                <li class="schedule__item">${F(w(b.mainSumms[e]))}</li>\n                <li class="schedule__item">${F(w(b.percentSumms[e]))}</li>\n            </ul>\n            `;s.children[1].textContent=F(w(b.finalSum)),s.children[2].textContent=F(w(b.mainFinalSum)),s.children[3].textContent=F(w(b.percentFianlSum))})(),l.classList.add("body-lock"),c.classList.remove("schedule-closed")})),o.addEventListener("click",(()=>{l.classList.remove("body-lock"),c.classList.add("schedule-closed")})),C(),x(m,S,1e6),x(h,p,120),x(a,i,1e8)}function swiperInit(){new Swiper(".swiper",{navigation:{nextEl:".swiper-next",prevEl:".swiper-prev"},autoHeight:!0,loop:!0,breakpoints:{0:{slidesPerView:1,spaceBetween:48},1180:{slidesPerView:3,spaceBetween:48},1480:{slidesPerView:3,spaceBetween:64}}})}document.addEventListener("DOMContentLoaded",(()=>{dropListInit(),formInit(),rangeSlidersInit(),swiperInit(),callInit()}));